@require '_lib'

:root
  // Basic layout variables
  // These can be edited
  --layout-header-height: 8rem
  --layout-navbar-height: 2.5rem
  --layout-top-max-width: 60rem
  --layout-sidebar-width: 16rem
  --layout-body-max-width: 45rem
  --layout-body-side-gap: 1.5rem
  --layout-footer-height: 2rem

  // Layout variables for smaller devices
  +match-media(thin, below) 
    --layout-header-height: 6rem
    --layout-navbar-height: 3rem
    --layout-top-max-width: 60rem
    --layout-sidebar-width: 16rem
    --layout-body-max-width: 45rem
    --layout-body-side-gap: 1rem
    --layout-footer-height: 2rem

  // Variables that probably shouldn't be edited
  --layout-header-height-scalefactor: calc(var(--layout-header-height) / 8)
  //                        Center of screen | Offset to left edge of body | Remove the offset caused by sidebar
  //                                     v                  v                           v
  --layout-body-centering-factor: calc((50vw - (var(--layout-body-max-width) / 2)) - var(--layout-sidebar-width))
  // Total height of the header + navbar
  --layout-total-header-height: calc(var(--layout-header-height) + var(--layout-navbar-height))

#app
  // Shorthands
  // Makes the grid-kiss declaration more compact and visually understandable.
  $head-h = var(--layout-header-height)
  $nav-h = var(--layout-navbar-height)
  $side-w = var(--layout-sidebar-width)
  $body-w = minmax(0, var(--layout-body-max-width))
  $gp = var(--layout-body-side-gap)
  $lg = minmax(var(--layout-body-side-gap), var(--layout-body-centering-factor))
  $rg = minmax(var(--layout-body-side-gap), auto)
  $foot-h = var(--layout-footer-height)

  width: 100%
  max-width: 100%
  min-height: 'calc(100vh + %s)' % $foot-h // Footer requires scrolling

  grid-kiss:"+--------------------------------------------+         ",
            "| #header                                    |         ",
            "|                                            | $head-h ",
            "|                                            |         ",
            "+--------------------------------------------+         ",
            "+--------------------------------------------+         ",
            "| #navbar                                    | $nav-h  ",
            "+--------------------------------------------+         ",
            "+----------+ +---+ +-------------------+ +---+         ",
            "| #sidebar | |   | | #content          | |   |         ",
            "|          | |   | |                   | |   |         ",
            "|          | |   | |                   | |   |         ",
            "|          | |   | |                   | |   |         ",
            "|          | |   | |                   | |   | auto    ",
            "|          | |   | |                   | |   |         ",
            "|          | |   | |                   | |   |         ",
            "|          | |   | |                   | |   |         ",
            "|          | |   | |                   | |   |         ",
            "|          | |   | |                   | |   |         ",
            "+----------+ +---+ +-------------------+ +---+         ",
            "+--------------------------------------------+         ",
            "|                                            |         ",
            "|                                            | $foot-h ",
            "| #footer                                    |         ",
            "+--------------------------------------------+         ",
            "|  $side-w   |$lg|        $body-w        |$rg|         "

  // Small devices foldable sidebar
  +match-media(thin, below)
    grid-kiss:"+------------------------------+         ",
              "| #header                      |         ",
              "|                              | $head-h ",
              "|                              |         ",
              "+------------------------------+         ",
              "+------------------------------+         ",
              "| #navbar                      | $nav-h  ",
              "+------------------------------+         ",
              "+---+ +------------------+ +---+         ",
              "|   | | #content         | |   |         ",
              "|   | |                  | |   |         ",
              "|   | |                  | |   |         ",
              "|   | |                  | |   |         ",
              "|   | |                  | |   |         ",
              "|   | |                  | |   | auto    ",
              "|   | |                  | |   |         ",
              "|   | |                  | |   |         ",
              "|   | |                  | |   |         ",
              "|   | |                  | |   |         ",
              "|   | |                  | |   |         ",
              "+---+ +------------------+ +---+         ",
              "+------------------------------+         ",
              "|                              |         ",
              "|                              | $foot-h ",
              "| #footer                      |         ",
              "+------------------------------+         ",
              "|$gp|        $body-w       |$gp|         "

// Header Internal Grid
#header
  grid-kiss:"+-------------+ +----------------------------------+ +-----------+",
            "|             | |                 v                | |           |",
            "|             | |           #header_logo           | |           |",
            "|             | |                 ^                | |           |",
            "+-------------+ +----------------------------------+ +-----------+",
            "| 5vh - 0.5fr | |  vm(auto, layout-top-max-width)  | | 5vh - 2fr |"

  // Centered logo
  +match-media(thin, below)
    grid-kiss:"+-----+ +--------------+ +-----+",
              "|     | |      v       | |     |",
              "|     | | #header_logo | |     |",
              "|     | |      ^       | |     |",
              "+-----+ +--------------+ +-----+",
              "| 1fr | |     auto     | | 1fr |"

// Header Logo Internal Grid
#header_logo
  top: center
  font-size: 1rem
  grid-kiss:"+-----------------------+        +--------------+ ------ ",
            "| #logo_emblem          |        |              |   1fr  ",
            "|                       |        +--------------+ ------ ",
            "|                       |        +--------------+ ------ ",
            "|                       |        | #logo_title  |   max  ",
            "|                       |        +--------------+ ------ ",
            "|                       |        +--------------+ ------ ",
            "|                       |        | #logo_slogan |  1rem  ",
            "|                       |        +--------------+ ------ ",
            "|                       |        +--------------+ ------ ",
            "|                       |        |              |   1fr  ",
            "+-----------------------+        +--------------+ ------ ",
            "|         7rem          | 0.5rem |     auto     |        "

  #logo_emblem, #logo_title, #logo_slogan
    pointer-events: none

  #logo_link
    top: center
    left: center
    width: 100%
    height: 100%

  #logo_emblem
    height: 7rem
    width: 7rem

  // Emblem appears looming behind the text
  +match-media(thin, below)
    top: center
    left: center
    grid-kiss:"+------------------+ ------ ",
              "|                  |  1rem  ",
              "+------------------+ ------ ",
              "+------------------+ ------ ",
              "| > #logo_title  < |   max  ",
              "+------------------+ ------ ",
              "+------------------+ ------ ",
              "| > #logo_slogan < |  1rem  ",
              "+------------------+ ------ ",
              "+------------------+ ------ ",
              "|                  |  1rem  ",
              "+------------------+ ------ ",
              "|       auto       |        "

    #logo_emblem
      top: center
      left: center
      height: 21rem
      width: 21rem