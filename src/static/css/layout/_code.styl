@require '_lib'

pre
  position: relative
  width: 100%
  max-width: 100%
  margin: 0
  padding: 0
  contain: content

  color: var(--colcode-content)
  box-shadow: 0 0 0.125rem 0 colvar('border')
  border-radius: 10px

  font-size: 0.875rem
  text-align: left
  white-space: pre
  word-break: normal
  word-wrap: normal
  tab-size: 4
  hyphens: none

  +match-media(thin, below)
    font-size: 0.75rem

  code
    display: block
    padding: 1.5em 1em
    width: 100%
    overflow-x: auto
    background: var(--colcode-background)


:not(pre)
  > code
    display: inline-block
    font-size: 0.9em
    white-space: normal
    padding: 0.1em 0.25em
    border-radius: 0.2em
  > code[class*=language-], > code.code
    background: var(--colcode-background)
    color: var(--colcode-content)

+prefix-classes('token.')
  .block-comment, .cdata, .comment, .doctype, .prolog
    color: var(--colcode-comment)

  .punctuation
    color: var(--colcode-punct)

  .variable, .parameter
     color: var(--colcode-ident)

  .deleted
    color: var(--colcode-invalid)

  .inserted
    color: var(--colcode-inserted)

  .function, .function-name, .attr-id
    color: var(--colcode-function)
  
  .property
    color: var(--colcode-property)

  .tag
    color: var(--colcode-tag)

  .attr-name, .attr-value, .selector
    color: var(--colcode-attribute)

  .boolean, .number, .constant, .symbol, .unit
    color: var(--colcode-constant)

  .keyword, .atrule, .important
    color: var(--colcode-keyword)

  .char, .string
    color: var(--colcode-string)

  .builtin, .generic, .class-name
    color: var(--colcode-type)

  .url
    color: var(--colcode-link)

  .namespace, .entity
    color: var(--colcode-entity)

  .regex, .operator
    color: var(--colcode-operator)

  +prefix-classes('token.keyword-')
    // .public, .private, .readonly, 
    // .const, .let, .var, .new, .type
    //   color: var(--colcode-storage)

    .this, .self
      color: var(--colcode-special)

  .bold, .important
    font-weight: bold

  .italic
    font-style: italic